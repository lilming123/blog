---
title: 前端面试题整理
date: 2023-10-16 22:54
updated: 星期一 16日 十月 2023 22:54:52
tags: 
categories:
  - _posts
keywords: 
description:
---
# HTML
## `cookie`、`sessionStorage` 和 `localStorage` 的区别

cookie：由服务器发送，浏览器能在之后的请求中将 cookie 返回给服务器，为了能在下次发送请求可以直接让服务器端知道是谁，通常用于会话管理比如登录、购物车、游戏分数，个性化设置等，容量在这三个当中最少，只有 4kb。

cookie常见字段：
-  `Expries` 用于设置 cookie 的过期时间
- `Max-Age` 用于设置在 Cookie 失效之前需要经过的秒数（优先级比`Expires`高）
- `Cookie`的`SameSite`属性
    - strict模式，完全禁止第三方请求携带，完全遵守同源策略
    - lax模式，get提交的时候可以携带
    - none模式，自动携带

- `domain` 属性用于限制 Cookie 的作用域，只有在指定的域名下才能够使用该 Cookie。
- `path` 属性则用于限制 Cookie 的生效路径，只有在指定的路径下才能够使用该 Cookie。
- `secure`：一个布尔值，表示是否只在 HTTPS 连接时发送 Cookie。
- `http-only`：一个布尔值，表示是否禁止通过 JavaScript 访问 Cookie，从而提高安全性。
- `name`：Cookie 的名称，通常是一个字符串。
- `value`：Cookie 的值，可以是一个字符串或其他类型的数据。

  

作者：草东没有派对吗  
链接：https://juejin.cn/post/7243437099361943608  
来源：稀土掘金  
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
sessionStorage 和 localStorage 都是 5mb， sessionStorage 是会随着页面的关闭而过期的，而 localStorage 是可以永久储存的

## `<script>`、`<script async>`和`<script defer>`的区别

- `<script>` - HTML 解析中断，脚本被提取并立即执行。执行结束后，HTML 解析继续。
- `<script async>` - 脚本的提取、执行的过程与 HTML 解析过程并行，脚本执行完毕可能在 HTML 解析完毕之前。当脚本与页面上其他脚本独立时，可以使用`async`，比如用作页面统计分析。
- `<script defer>` - 脚本仅提取过程与 HTML 解析过程并行，脚本的执行将在 HTML 解析完毕后进行。如果有多个含`defer`的脚本，脚本的执行顺序将按照在 document 中出现的位置，从上到下顺序执行。
没有 `src` 属性的脚本，`async` 和 `defer` 属性会被忽略。

## 为什么最好把 CSS 的 `<link>` 标签放在 `<head></head>` 之间？为什么最好把 JS 的 `<script>` 标签恰好放在 `</body>` 之前，有例外情况吗？

**把 `<link>` 放在 `<head>` 中**

把`<link>`标签放在`<head></head>`之间是规范要求的内容。此外，这种做法可以让页面逐步呈现，提高了用户体验。将样式表放在文档底部附近，会使许多浏览器（包括 Internet Explorer）不能逐步呈现页面。一些浏览器会阻止渲染，以避免在页面样式发生变化时，重新绘制页面中的元素。这种做法可以防止呈现给用户空白的页面或没有样式的内容。

**把`<script>`标签恰好放在`</body>`之前**

脚本在下载和执行期间会阻止 HTML 解析。把`<script>`标签放在底部，保证 HTML 首先完成解析，将页面尽早呈现给用户。

例外情况是当你的脚本里包含`document.write()`时。但是现在，`document.write()`不推荐使用。同时，将`<script>`标签放在底部，意味着浏览器不能开始下载脚本，直到整个文档（document）被解析。也许，对此比较好的做法是，`<script>`使用`defer`属性，放在`<head>`中。
## IndexedDB

`indexedDB`是运行在浏览器中的**非关系型数据库**，`IndexDB`的一些重要特性，除了拥有数据库本身的特性，比如`支持事务`，`存储二进制数据`，还有这样一些特性需要格外注意：

虽然 `Web Storage`对于存储较少量的数据很有用，但对于存储更大量的结构化数据来说，这种方法不太有用。`IndexedDB`提供了一个解决方案。

#### 优点：

- 储存量理论上没有上限
- 所有操作都是异步的，相比 `LocalStorage` 同步操作性能更高，尤其是数据量较大时
- 原生支持储存`JS`的对象
- 是个正经的数据库，意味着数据库能干的事它都能干
#### 缺点：

- 操作非常繁琐
- 本身有一定门槛

关于`indexedDB`的使用基本使用步骤如下：

- 打开数据库并且开始一个事务
- 创建一个 `object store`
- 构建一个请求来执行一些数据库操作，像增加或提取数据等。
- 通过监听正确类型的 `DOM` 事件以等待操作完成。
- 在操作结果上进行一些操作（可以在 `request`对象中找到）

关于使用`indexdb`的使用会比较繁琐，大家可以通过使用`Godb.js`库进行缓存，最大化的降低操作难度。

  

## 问题三：从 url 输入到页面显示的具体过程

1. 用户输入url并回车
2. 浏览器进程检查url，组装协议，构成完整的url
3. 浏览器进程通过进程间通信（IPC）把url请求发送给网络进程
4. 网络进程接收到url请求后检查本地缓存是否缓存了该请求资源，如果有则将该资源返回给浏览器进程
    
5. 如果没有，网络进程向web服务器发起http请求（网络请求），请求流程如下：
    
    - 进行DNS解析，获取服务器ip地址，端口
    - 利用ip地址和服务器建立tcp连接
    - 构建请求头信息
    - 发送请求头信息
    - 服务器响应后，网络进程接收响应头和响应信息，并解析响应内容
6. 网络进程解析响应流程；
    
    - 检查状态码，如果是301/302，则需要重定向，从Location自动中读取地址，重新进行第4步，如果是200，则继续处理请求。
    - 200响应处理： 检查响应类型Content-Type，如果是字节流类型，则将该请求提交给下载管理器，该导航流程结束，不再进行 后续的渲染，如果是html则通知浏览器进程准备渲染进程准备进行渲染。
7. 准备渲染进程
    
    - 浏览器进程检查当前url是否和之前打开的渲染进程根域名是否相同，如果相同，则复用原来的进程，如果不同，则开启新的渲染进程
8. 传输数据、更新状态
    
    - 渲染进程准备好后，浏览器向渲染进程发起“提交文档”的消息，渲染进程接收到消息和网络进程建立传输数据的“管道”
    - 渲染进程接收完数据后，向浏览器发送“确认提交”
    - 浏览器进程接收到确认消息后更新浏览器界面状态：安全、地址栏url、前进后退的历史状态、更新web页面

## 问题四：渲染流程

1. **渲染进程接受完数据之后，先把html内容转换为DOM树**(document)
    
2. **渲染引擎将html内容里的css内容转换为styleSheets**(document.styleSheets)，还会把属性值标准化，比如rem转换为px，**计算DOM节点的样式**，把不显示在页面的DOM去掉。设置为display:none的节点，会存在在DOM树里。
    
3. **创建布局树，计算元素、节点的布局信息**
    
4. 对布局树进行分层，生成分层树。页面元素是按照嵌套关系组织的，生成分层树，使得渲染更加高效
    
5. 对每一个图层生成绘制列表，并提交到合成线程中。绘制列表只是用来记录绘制顺序和绘制指令的列表，际上绘制操作是由渲染引擎中的合成线程来完成的。
    
6. **合成线程将图层会分成图块，并在光栅化线程池中将图块转换成位图。**合成线程会将图层划分为图块（tile），这些图块的大小通常是 `256x256` 或者 `512x512`,合成线程会按照**视口**附近的图块来**优先**生成位图，实际生成位图的操作是由栅格化来执行的。所谓栅格化，是指将图块转换为位图.位图（bitmap），也叫做**光栅图或像素图**，例如，当浏览器将网页中的 `SVG` 图片或 `Canvas` 元素渲染成屏幕上可视的元素时，会使用光栅化技术将其转换为位图。位图可以直接在屏幕上显示，而不需要进行额外的计算，因此它们是一种非常高效的图像呈现方式。栅格化过程都会使用 `GPU` 来加速生成，使用 `GPU` 生成位图的过程叫**快速栅格化**，或者 `GPU` 栅格化，生成的位图被保存在 `GPU` 内存中。这就涉及到了跨进程操作。
    
7. **合成线程发送绘制图块命令 DrawQuad 给浏览器进程。**
    
8. **浏览器进程根据 DrawQuad 消息生成页面，并显示到显示器上。**浏览器进程里面有一个叫 `viz` 的组件，用来接收合成线程发过来的`DrawQuad`命令，然后根据`DrawQuad`命令，将其页面内容绘制到**内存**中，最后再将内存的绘制内容显示在屏幕上。
    

`CSS`的`transform`属性可以用来对元素进行**平移、旋转、缩放等变换**。由于`transform`**只涉及到视觉呈现的变化，而不会引起文档流的改变，因此在使用`transform`实现动画效果时，可以避开重排和重绘阶段，从而提高页面性能。**
